# Конфигурация

Chat CLI использует многоуровневую систему конфигурации для обеспечения максимальной гибкости. Настройки загружаются из нескольких источников, причем каждый последующий уровень переопределяет предыдущий. Это позволяет вам устанавливать глобальные значения по умолчанию, настройки для конкретных проектов и временные переопределения.

Порядок приоритета следующий:
1.  Глобальная конфигурация пользователя
2.  Конфигурация проекта
3.  Переменные окружения

---

### Уровень 1: Глобальная конфигурация пользователя

Этот файл предназначен для хранения ваших личных настроек по умолчанию, которые вы хотите применять ко всем своим проектам.

*   **Путь:** `~/.chat_cli/chat.cfg`
*   **Назначение:** Установка глобальных предпочтений, таких как язык по умолчанию, предпочитаемая модель или редактор. Приложение ищет этот файл при запуске.

**Пример `~/.chat_cli/chat.cfg`:**
```json
{
  "user_name": "Алекс",
  "default_language": "russian",
  "default_model": "groq/llama3-70b",
  "editor": "vim"
}
```

---

### Уровень 2: Конфигурация проекта

Этот уровень конфигурации загружается из файла базы данных, специфичного для проекта, обычно называемого `<имя_проекта>.db` (по умолчанию `chat.db`). Эта база данных создается и управляется командой `chat new`.

*   **Путь:** `<папка_проекта>/<имя_проекта>.db` (по умолчанию: `chat.db`)
*   **Назначение:** Хранение настроек, уникальных для конкретного проекта, таких как язык программирования, конкретная модель или другие данные, специфичные для проекта.
*   **Поиск:** Когда вы выполняете команду, например `chat add` или `chat run`, CLI автоматически ищет базу данных проекта в текущем каталоге, а затем поднимается вверх по дереву каталогов, пока не найдет ее. Это позволяет выполнять команды из любого подкаталога вашего проекта.

**Пример (концептуальный) данных конфигурации проекта:**
(Примечание: Эти данные хранятся в базе данных, а не напрямую в удобочитаемом файле, таком как JSON)
```
{
  "project_path": "/home/user/projects/my_python_project",
  "language": "russian",
  "code_language": "python",
  "model": "anthropic/claude-3-opus"
}
```
В этом примере настройка `model` переопределит `default_model` из глобальной конфигурации.

---

### Уровень 3: Переменные окружения

Переменные окружения являются источником конфигурации с самым высоким прио��итетом и идеально подходят для конфиденциальных данных, таких как ключи API, или для временных переопределений.

*   **Назначение:** Безопасное предоставление ключей API без их жесткого кодирования в файлах и временное изменение настроек без редактирования каких-либо файлов конфигурации.
*   **Приоритет:** Значения, установленные через переменные окружения, всегда будут переопределять настройки из любых файлов конфигурации.

**Пример:**
```bash
# Установка ключей API (лучшая практика)
export GROQ_API_KEY="gsk_..."
export ANTHROPIC_API_KEY="sk-ant-..."

# Временное переопределение редактора для текущей сессии
export EDITOR="code"
```

Этот многоуровневый подход обеспечивает мощный и гибкий способ управления вашими настройками в различных контекстах.
